FROM golang:1.19.5-alpine as build

WORKDIR /src/library
ADD . /src/library
RUN CGO_ENABLED=0 go build -o /bin/library ./services/library/cmd/library

FROM ubuntu:20.04

RUN apt-get update && apt-get install -y --no-install-recommends ca-certificates
COPY --from=build /bin/library /app/library

# Copy Static Files
COPY ./static /app/static

EXPOSE 8000
CMD ["/app/library"]
